
<script>
let start = Date.now();

// Example search term capture from input field (adjust selector as needed)
let searchTerms = [];
document.addEventListener("input", function(e) {
  if (e.target.name === "search" && e.target.value.length > 2) {
    searchTerms = [e.target.value];
  }
});

// Track ad clicks
let clickedAd = false;
document.querySelectorAll(".ad-banner, .sponsored").forEach(el => {
  el.addEventListener("click", () => { clickedAd = true; });
});

window.addEventListener("beforeunload", () => {
  fetch("https://goonerbrain-admin.onrender.com/track", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      gender: "unknown",  // Optional: pull from profile if known
      search_terms: searchTerms.length ? searchTerms : ["unknown"],
      clicked_ad: clickedAd,
      time_spent_seconds: Math.floor((Date.now() - start) / 1000)
    })
  });
});
</script>
